<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <style type="text/css">
            img { 
                display: block;
                position: relative;
                left: 100%;
                margin-right: 100px;

            }
        </style>
    </head>
    <body>
        <script>
            const animeData = {
                name: "ousama ranking",
                type: "TV",
                genre: "fantasy",
                website:
                    "https://myanimelist.net/anime/40834/Ousama_Ranking?q=ousama&cat=anime",
                description: "boji",
            };
            const url1 = `https://api.jikan.moe/v3/search/anime?q=`;
            const url2 = `&page=1`;

            const fetchAnime = async (animeName) => {
                try {
                    const response = await fetch(url1 + animeName + url2);
                    const data = await response.json();
                    const list = data.results;
                    // console.log(list);
                    return list;
                } catch (err) {
                    // console.log(err);
                    return;
                }
            };

            const searchAnime = async (query) => {
                const name = query.split(" ").join("%20");
                // console.log(name);
                const list = await fetchAnime(name);
                // console.log(list);
                // console.log(query);
                const anime = list.find(
                    (anime) => anime.title.toLowerCase() == query.toLowerCase()
                );
                // console.log(anime);
                if (anime) {
                    // console.log(anime.image_url);
                    return anime.image_url;
                } else {
                    return "img/imageNotFound.png";
                }
            };
            const catchURL = async (animeName) => {
                const photo = await searchAnime(animeName);
                const photoData = JSON.stringify(photo);
                const photoJson = JSON.parse(photoData);
                // console.log(photoJson);
                const img = document.createElement("img");
                img.src = photoJson;
                document.body.appendChild(img);
                const anidata = {...animeData, img: photoJson}
                console.log(anidata);
                return photoJson;
            };
            catchURL("made in abyss");
        </script>
    </body>
</html>
<!-- console.log(anime.title.toLowerCase(),query.toLowerCase());
                    console.log(anime.title.toLowerCase() == query.toLowerCase()); -->
